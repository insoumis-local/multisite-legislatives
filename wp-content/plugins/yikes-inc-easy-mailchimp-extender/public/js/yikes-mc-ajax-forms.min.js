window.Yikes_Mailchimp_Ajax=window.Yikes_Mailchimp_Ajax||{},function(a,b,c,d,e){"use strict";function f(a,b){"undefined"!=typeof a&&c.each(a,function(a,d){b===!0?c("span."+a+"-label").length>0?c("span."+a+"-label").addClass("yikes-mc-required-field-not-filled"):c("."+a+"-label").addClass("yikes-mc-required-field-not-filled"):c('label[for="'+a+'"]').children("input").addClass("yikes-mc-required-field-not-filled")})}d.l10n=a.yikes_mailchimp_ajax||{},c(b).ready(function(){var b=c("body");b.on("submit",".yikes-easy-mc-form",function(){var b=c(this);b.addClass("yikes-mc-submitted-form-loading"),b.find("input, label, button").not(":hidden").fadeTo("fast",.5),b.append('<img src="'+d.l10n.preloader_url+'" class="yikes-mailchimp-preloader" />'),c(".yikes-mc-required-field-not-filled").removeClass("yikes-mc-required-field-not-filled"),c(".yikes-mailchimp-submit-button-span-text").hide(),b.find(".yikes-easy-mc-submit-button").append('<img src="'+d.l10n.loading_dots+'" class="loading-dots yikes-mc-loading-dots" />');var e=b.attr("data-attr-form-id"),g=[];if(b.find(".yikes-interest-group-required").length>0&&b.find(".yikes-interest-group-required").each(function(){var a=jQuery(this).attr("name"),c=a.replace("[]","");0==b.find('input[name="'+c+'[]"]:checked').length&&(g[c]=b.find("span."+c+"-label").text())}),g.length>0){if(b.find(".yikes-mailchimp-required-interest-group-error").length>0)b.find(".yikes-mailchimp-required-interest-group-error").fadeOut("fast",function(){b.find(".yikes-mailchimp-required-interest-group-error").remove();for(var a in g)b.find("span."+a+"-label").after('<p class="yikes-mailchimp-required-interest-group-error">'+d.l10n.interest_group_checkbox_error+"</p>")});else for(var h in g)b.find("span."+h+"-label").after('<p class="yikes-mailchimp-required-interest-group-error">'+d.l10n.interest_group_checkbox_error+"</p>");return b.find(".yikes-easy-mc-submit-button").removeAttr("disabled","disabled"),b.find("input, label, button").not(":hidden").fadeTo("fast",1),b.find(".yikes-mailchimp-preloader").remove(),c(".yikes-mc-loading-dots").remove(),c(".yikes-mailchimp-submit-button-span-text").show(),b.removeClass("yikes-mc-submitted-form-loading"),!1}b.find(".yikes-easy-mc-submit-button").attr("disabled","disabled"),c(".yikes-easy-mc-error-message").remove(),c(".yikes-easy-mc-success-message").remove();var i={action:"process_form_submission",form_data:b.serialize(),form_id:e,page_data:d.l10n.page_data,ajax_security_nonce:d.l10n.ajax_security_nonce};return c.ajax({url:d.l10n.ajax_url,type:"POST",data:i,success:function(g,h,i){if(b.find("input, label, button").not(":hidden").fadeTo("fast",1),b.find(".yikes-mailchimp-preloader").remove(),c(".yikes-mc-loading-dots").remove(),c(".yikes-mailchimp-submit-button-span-text").show(),b.removeClass("yikes-mc-submitted-form-loading"),g.success){if(g=g.data,"function"==typeof yikes_mailchimp_google_analytics_success&&yikes_mailchimp_google_analytics_success(g),1==g.hide&&(c(".yikes-easy-mc-form-description-"+e).length>0&&c(".yikes-easy-mc-form-description-"+e).hide(),b.hide()),c(".yikes-easy-mc-form-description-"+e).length>0?c(".yikes-easy-mc-form-description-"+e).before('<p class="yikes-easy-mc-success-message yikes-easy-mc-success-message-'+e+' yikes-easy-mc-hidden">'+g.response+"</p>"):b.before('<p class="yikes-easy-mc-success-message yikes-easy-mc-success-message-'+e+' yikes-easy-mc-hidden">'+g.response+"</p>"),c(".yikes-easy-mc-success-message-"+e).fadeIn(),c(".yikes-mailchimp-required-interest-group-error").remove(),1===g.redirection){var j=g.redirect,k=g.redirect_timer,l=g.new_window,m="1"===l?"_blank":"_self";setTimeout(function(){a.open(j,m)},k)}b.find("input").not('.yikes-easy-mc-submit-button, input[type="radio"], input[type="select"], input[type="checkbox"], #yikes-mailchimp-associated-list-id, #yikes-mailchimp-submitted-form').val("");var n={action:"increase_submission_count",form_id:e};c.ajax({url:d.l10n.ajax_url,type:"POST",data:n,success:function(a,b,c){},error:function(a,b,c){console.error(c)}})}else{if(g=g.data,"function"==typeof yikes_mailchimp_google_analytics_failure&&yikes_mailchimp_google_analytics_failure(g),c(".yikes-easy-mc-form-description-"+e).length>0)c(".yikes-easy-mc-form-description-"+e).before('<p class="yikes-easy-mc-error-message yikes-easy-mc-error-message-'+e+'" yikes-easy-mc-hidden"> '+g.response+"</p>");else{var o="undefined"!=typeof g&&"undefined"!=typeof g.response?g.response:"Error collecting the API response.";b.before('<p class="yikes-easy-mc-error-message yikes-easy-mc-error-message-'+e+' yikes-easy-mc-hidden">'+o+"</p>")}if("undefined"!=typeof g&&"undefined"!=typeof g.missing_required_field&&g.missing_required_field===!0&&"undefined"!=typeof g.missing_required_field_data){var p=g.missing_required_field_data,q="undefined"!=typeof g.is_interest_group&&g.is_interest_group;f(p,q)}c(".yikes-easy-mc-error-message").fadeIn()}},error:function(a,b,c){console.error(c),console.log(a),console.log(b)},complete:function(a,c){b.find(".yikes-easy-mc-submit-button").removeAttr("disabled","disabled")}}),!1})})}(window,document,jQuery,Yikes_Mailchimp_Ajax);