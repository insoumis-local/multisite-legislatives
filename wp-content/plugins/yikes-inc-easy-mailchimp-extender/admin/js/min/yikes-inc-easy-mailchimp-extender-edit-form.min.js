function togglePageRedirection(a){var b=jQuery("#enable-ajax").is(":checked");1==a.value?(jQuery("#redirect-user-to-selection-label").fadeIn(),b===!0&&jQuery(".redirect-new-window-div").fadeIn()):jQuery("#redirect-user-to-selection-label, .redirect-new-window-div").fadeOut()}function storeGlobalClicked(a){var b=a.parents("td").find("input").attr("name");jQuery(".clicked-input").val(b)}function populateDefaultValue(a){var b=jQuery(".clicked-input").val();jQuery(".clicked-input").val(""),tb_remove(),jQuery('input[name="'+b+'"]').val(a)}function toggle_nested_section(a){var b=jQuery(a).val();switch(b){case"image":jQuery(".submit-button-type-text").fadeOut("fast",function(){jQuery(".submit-button-type-image").fadeIn("fast")});break;case"text":jQuery(".submit-button-type-image").fadeOut("fast",function(){jQuery(".submit-button-type-text").fadeIn("fast")});break;default:case"1":"yikes-easy-mc-form-schedule"==jQuery(a).attr("name")?jQuery(".date-restirction-section").fadeToggle():jQuery(".login-restirction-section").fadeToggle()}return!1}function initialize_form_schedule_time_pickers(){jQuery(".date-picker").datepicker({numberOfMonths:1,showButtonPanel:!0,closeText:window.yikes_mailchimp_edit_form.closeText,currentText:window.yikes_mailchimp_edit_form.currentText,monthNames:window.yikes_mailchimp_edit_form.monthNames,monthNamesShort:window.yikes_mailchimp_edit_form.monthNamesShort,dayNames:window.yikes_mailchimp_edit_form.dayNames,dayNamesShort:window.yikes_mailchimp_edit_form.dayNamesShort,dayNamesMin:window.yikes_mailchimp_edit_form.dayNamesMin,dateFormat:window.yikes_mailchimp_edit_form.dateFormat,firstDay:window.yikes_mailchimp_edit_form.firstDay,isRTL:window.yikes_mailchimp_edit_form.isRTL,onSelect:function(a,b){var c=b.lastVal,d=b.id;yikes_check_valid_date(a,c,d)}}),jQuery(".time-picker").timepicker({scrollDefault:"now",timeFormat:"h:i A"}),jQuery(".time-picker").on("changeTime",function(){var a=jQuery(this).attr("id"),b=jQuery("#yikes-easy-mc-form-restriction-start-date").val(),c=jQuery("#yikes-easy-mc-form-restriction-end-date").val();yikes_check_valid_date(b,c,a)})}function yikes_check_valid_date(a,b,c){var d=jQuery("#yikes-easy-mc-form-restriction-start-date").val(),e=jQuery("#yikes-easy-mc-form-restriction-end-date").val(),f=yikes_12_to_24_hour_time_conversion(jQuery("#yikes-easy-mc-form-restriction-start-time").val()),g=yikes_12_to_24_hour_time_conversion(jQuery("#yikes-easy-mc-form-restriction-end-time").val()),h=new Date(d+" "+f),i=new Date(e+" "+g);if(h>i){if("yikes-easy-mc-form-restriction-start-date"!=c&&"yikes-easy-mc-form-restriction-end-date"!=c||jQuery("#"+c).val(b),jQuery(".date-restirction-section").find("p.description.error").length)return;jQuery(".date-restirction-section").first().find("p.description").after('<p class="description error">'+window.yikes_mailchimp_edit_form.start_date_exceeds_end_date_error+"</p>")}else jQuery(".date-restirction-section").find("p.description.error").remove()}function yikes_12_to_24_hour_time_conversion(a){var b=Number(a.match(/^(\d+)/)[1]),c=Number(a.match(/:(\d+)/)[1]),d=a.match(/\s(.*)$/)[1];"PM"==d&&b<12&&(b+=12),"AM"==d&&12==b&&(b-=12);var e=b.toString(),f=c.toString();return b<10&&(e="0"+e),c<10&&(f="0"+f),e+":"+f}function toggleUpdateEmailContainer(a){jQuery(".send-update-email").stop().fadeToggle()}function yikes_mc_prevent_default_stop_prop(a){a.preventDefault(),a.stopPropagation()}function yikes_mc_toggle_field_label_edit(a){jQuery(a).siblings(".yikes-mc-edit-field-label-input").val(jQuery(a).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-label").val());var b=jQuery(a).siblings(".yikes-mc-expansion-section-field-label, .field-type-text"),c=jQuery(a).siblings(".yikes-mc-edit-field-label-input, .yikes-mc-save-field-label-edits-icon");jQuery(a).hasClass("dashicons-no")?(b=jQuery(a).siblings(".yikes-mc-edit-field-label-input, .yikes-mc-save-field-label-edits-icon"),c=jQuery(a).siblings(".yikes-mc-expansion-section-field-label, .field-type-text"),a.title=yikes_mailchimp_edit_form.edit_field_label_pencil_title):a.title=yikes_mailchimp_edit_form.edit_field_label_cancel_title,jQuery(a).toggleClass("dashicons-no dashicons-edit"),b.fadeToggle().promise().done(function(){c.fadeToggle()})}function yikes_mc_save_field_label_name(a,b,c){var d={action:"save_field_label_edits",list_id:b,field_data:c,nonce:yikes_mailchimp_edit_form.save_field_label_nonce};jQuery.post(yikes_mailchimp_edit_form.ajax_url,d,function(b){if("undefined"!==b&&"undefined"!==b.success){var d=b.success;if(d===!0){var e=c.field_name;yikes_mc_update_field_label(a,e),yikes_mc_toggle_field_label_edit(jQuery(a).siblings(".dashicons-no"))}else{var f="";"undefined"!==b.data&&"undefined"!==b.data.message&&(f=b.data.message,yikes_mc_display_field_label_error_message(a,f))}}})}function yikes_mc_update_field_label(a,b){jQuery(a).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-label").val(b),jQuery(a).siblings(".yikes-mc-expansion-section-field-label").text(b)}function yikes_mc_display_field_label_error_message(a,b){jQuery(a).siblings(".yikes-mc-edit-field-label-message").fadeOut(function(){jQuery(this).text(b).fadeIn()})}window.Yikes_MailChimp_Edit_Form=window.Yikes_MailChimp_Edit_Form||{},window.yikes_mailchimp_edit_form=window.yikes_mailchimp_edit_form||{},function(a,b,c,d,e){"use strict";d.l10n=a.yikes_mailchimp_edit_form||{},c(b).ready(function(){jQuery("#form-builder-container").children().length>0&&jQuery(".edit-form-description-form-builder").hide(),c("body").find("#form-builder-container").sortable({items:".draggable:not(.non-draggable-yikes)",axis:"y",placeholder:"form-builder-placeholder",update:function(){var a=1;jQuery("#form-builder-container").find(".draggable").each(function(){jQuery(this).find(".position-input").val(a),a++})}}),c("body").on("click",".remove-field",function(){var a=jQuery(this).attr("alt"),b=jQuery(this);return c(this).parents(".yikes-mc-settings-expansion-section").prev().find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),c(this).parents(".yikes-mc-settings-expansion-section").slideToggle(450,function(){b.parents(".draggable").find(".expansion-section-title").css("background","rgb(255, 134, 134)"),b.parents(".draggable").fadeOut("slow",function(){jQuery("#available-fields").find('li[alt="'+a+'"]').removeClass("not-available"),jQuery("#available-interest-groups").find('li[alt="'+a+'"]').removeClass("not-available"),jQuery(this).remove(),c("#form-builder-container").find(".draggable").length<1&&(c(".clear-form-fields").hide(),c(".clear-form-fields").next().hide(),c("#form-builder-container").html('<h4 class="no-fields-assigned-notice non-draggable-yikes"><em>'+d.l10n.no_fields_assigned+"</em></h4>"))})}),!1}),c("body").on("click",".hide-field",function(){return c(this).parents(".yikes-mc-settings-expansion-section").slideToggle(450).prev().find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),!1}),c("body").on("click",".add-field-to-editor",function(){return jQuery(".edit-form-description-form-builder").show(),c(".field-to-add-to-form").each(function(){var a=c("#form-builder-container").find(".draggable").length,b=c(this),e=b.attr("alt");c("#available-fields").children("li").removeClass("available-form-field");var f=c(this);f.attr("disabled","disabled").attr("onclick","return false;").removeClass("add-field-to-editor");var g={action:"add_field_to_form",field_name:b.attr("data-attr-field-name"),merge_tag:e,field_type:b.attr("data-attr-field-type"),list_id:b.attr("data-attr-form-id")};c.ajax({url:d.l10n.ajax_url,type:"POST",data:g,dataType:"html",success:function(d,f,g){b.removeClass("field-to-add-to-form").addClass("not-available"),c(".add-field-to-editor").hide(),c(".no-fields-assigned-notice").is(":visible")&&c("#form-builder-container").html(""),c("#form-builder-container").append(d),c(".clear-form-fields").show(),c(".clear-form-fields").next().show(),c(".field-"+e+"-position").val(parseInt(a+1))},error:function(a,b,c){alert(b+a.status+a.responseText+"...")},complete:function(a,b){c("#available-fields").children("li").addClass("available-form-field"),f.removeAttr("disabled").removeAttr("onclick"),c(".add-field-to-editor").hide()}})}),!1}),c("body").on("click",".add-interest-group-to-editor",function(){var a=c("#form-builder-container").find(".draggable").length,b=[];c(".group-to-add-to-form").each(function(){b.push({group_id:c(this).attr("alt"),field_type:c(this).attr("data-attr-field-type"),field_name:c(this).attr("data-attr-field-name")})}),c("#available-interest-groups").children("li").removeClass("available-interest-group");var e=c(this);e.attr("disabled","disabled").attr("onclick","return false;").removeClass("add-interest-group-to-editor");var f={action:"add_interest_group_to_form",interest_groups:b,list_id:c(".group-to-add-to-form").attr("data-attr-form-id")};return c.ajax({url:d.l10n.ajax_url,type:"POST",data:f,dataType:"html",success:function(b,d,e){c(".group-to-add-to-form").removeClass("group-to-add-to-form").addClass("not-available"),c(".add-interest-group-to-editor").hide(),a<1?(c("#form-builder-container").html("").append(b),c(".clear-form-fields").show(),c(".clear-form-fields").next().show()):c("#form-builder-container").append(b)},error:function(a,b,c){alert(b+a.status+a.responseText+"...")},complete:function(a,b){c("#available-interest-groups").children("li").addClass("available-interest-group"),e.removeAttr("disabled").removeAttr("onclick").addClass("add-interest-group-to-editor"),c(".add-interest-group-to-editor").hide()}}),!1}),c(".color-picker").each(function(){c(this).wpColorPicker()}),c("body").on("click",".expansion-section-title",function(){return c(this).next().stop().slideToggle(),c(this).find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),!1}),c("body").on("click",".available-form-field",function(){return!c(this).hasClass("not-available")&&void(c(this).hasClass("field-to-add-to-form")?(c(this).removeClass("field-to-add-to-form"),c(".add-field-to-editor").stop().fadeOut()):(c(this).toggleClass("field-to-add-to-form"),c(".add-field-to-editor").stop().fadeIn()))}),c("body").on("click",".available-interest-group",function(){return!c(this).hasClass("not-available")&&(c(this).hasClass("group-to-add-to-form")?c(this).removeClass("group-to-add-to-form"):c(this).toggleClass("group-to-add-to-form"),void(c(".group-to-add-to-form").length>0?c(".add-interest-group-to-editor").stop().fadeIn():c(".add-interest-group-to-editor").stop().fadeOut()))}),c("body").on("click",".hidden_setting",function(){c(".hidden_setting").removeClass("selected_hidden_setting"),c(".selected_setting_triangle").remove(),c(this).addClass("selected_hidden_setting").append('<div class="selected_setting_triangle"></div>');var a=c(this).attr("data-attr-container");c(".hidden-setting-label").hide(),c("#"+a).show()}),c("body").on("click",".close-form-expansion",function(){var a=c(this).parents(".yikes-mc-settings-expansion-section").slideToggle();return a.prev().find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),!1}),c("body").on("click",".mv_ig_list .nav-tab",function(){if(c(this).hasClass("nav-tab-active"))return!1;if(c(this).hasClass("nav-tab-disabled"))return!1;c(".mv_ig_list .nav-tab").removeClass("nav-tab-active"),c(".arrow-down").remove(),c(this).addClass("nav-tab-active").prepend('<div class="arrow-down"></div>'),c(".mv_ig_list .nav-tab").addClass("nav-tab-disabled");var a=c(this).attr("alt");return"merge-variables"==a?(c("#merge-variables-container").stop().animate({left:"0px"},function(){c(".mv_ig_list .nav-tab").removeClass("nav-tab-disabled")}),c("#interest-groups-container").stop().animate({left:"+=278px"},function(){c(".mv_ig_list .nav-tab").removeClass("nav-tab-disabled")})):(c("#merge-variables-container").stop().animate({left:"-=278px"},function(){c(".mv_ig_list .nav-tab").removeClass("nav-tab-disabled")}),c("#interest-groups-container").stop().animate({left:"-=278px"},function(){c(".mv_ig_list .nav-tab").removeClass("nav-tab-disabled")})),!1}),c("body").on("click",".clear-form-fields",function(){return confirm(d.l10n.bulk_delete_alert)&&c("#form-builder").find(".draggable").find(".expansion-section-title").each(function(){c(this).css("background","rgb(255, 134, 134)");var a=c(this).parents(".draggable").find(".remove-field").attr("alt");c(this).fadeOut("slow",function(){c("#available-fields").find('li[alt="'+a+'"]').removeClass("not-available"),c("#available-interest-groups").find('li[alt="'+a+'"]').removeClass("not-available"),c(this).remove(),c(".clear-form-fields").hide(),c(".clear-form-fields").next().hide(),c(".available-form-field").each(function(){c(this).removeClass("not-available")}),c("#form-builder-container").html('<h4 class="no-fields-assigned-notice non-draggable-yikes"><em>'+d.l10n.no_fields_assigned+"</em></h4>")})}),!1}),c(".yikes-mc-edit-field-label-icon").click(function(a){yikes_mc_prevent_default_stop_prop(a),jQuery(this).siblings(".yikes-mc-edit-field-label-message").fadeOut();var b=this;yikes_mc_toggle_field_label_edit(b)}),c(".yikes-mc-edit-field-label-input").click(function(a){yikes_mc_prevent_default_stop_prop(a)}),c(".yikes-mc-save-field-label-edits-icon").click(function(a){yikes_mc_prevent_default_stop_prop(a),jQuery(this).siblings(".yikes-mc-edit-field-label-message").fadeOut();var b=this,c=jQuery("#form-builder-div").data("list-id"),d=jQuery(this).siblings(".yikes-mc-edit-field-label-input").val(),e=jQuery(this).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-id").val(),f={field_name:d,field_id:e},g=jQuery(this).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-label").val();return g===d?void yikes_mc_toggle_field_label_edit(jQuery(this).siblings(".yikes-mc-edit-field-label-icon")):void yikes_mc_save_field_label_name(b,c,f)}),initialize_form_schedule_time_pickers(),c(".yikes-enable-disable-ajax").click(function(){var a=c("#enable-ajax").is(":checked"),b=c("#redirect-user").is(":checked");a===!0&&b===!0?c(".redirect-new-window-div").fadeIn():c(".redirect-new-window-div").fadeOut()})})}(window,document,jQuery,Yikes_MailChimp_Edit_Form);